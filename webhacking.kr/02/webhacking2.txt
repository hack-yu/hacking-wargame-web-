7598522ae
0nly_admin

webhacking.kr의 2번 문제이다. webhacking.kr을 시작한다고 했을 때 주변에서 이 문제가 실제로 CTF에서도 나올 정도로 잘 만들어진 문제이고 괜찮은 내용을 다루고 있다고 익히들었다. 물론 현재 작성하고 있을 때보다 이전에 해결한 문제이지만 현재 이 게시글을 쓰면서 되돌아보니 재미있고, 잘만들어진 문제라고 하는게 어느정도 이해가 되니 흐뭇하다.
간단하게 얘기하면 해당 문제는 블라인드 SQL Injection라고 단정 짓기에는 그렇지만 나는 Blind SQL Injection 문제라고 생각하고 문제를 해결하였다.
1.메인페이지.png

먼저 SQL Injection이 가능한 포인트 부분으로 페이지를 접속하면 쿠키 time의 값이 있는 것을 확인할 수 있으며, 문제 메인페이지의 소스보기를 통해 주석으로 시간이 나온다.
2.그냥쿠키타임스탬프값.png

쿠키 time의 값 뒤에 and 0, and 1 등과 같이 주입한 결과에 따라 주석의 값이 변경되는 것을 보고 SQL Injection 문제임을 파악할 수 있다.
time 값 and 0
3.and 0 사진
time 값 and 1
4.and 1 사진


페이지를 둘러보며 두곳의 패스워드를 Blind SQL Injection을 통해 알아내는 것이 문제의 핵심인 것을 파악할 수 있다. 
Board 게시글
5.
6.

admin 페이지(메인 페이지에서 우측 상단의 용의 머리를 클릭하면 이동)
7.

패스워드를 알아내는 방법은 아래와 같이 Blind SQL Injection을 진행한다.
1)Blind SQL Injection을 통한 패스워드의 길이 구하기
2)Blind SQL Injection을 통한 패스워드 값 알아내기

물론, 길이를 알아내지 않아도 값만 바로 알아내도 되지만 확실하게 얻고자 하는 정보만 확실하게 얻기 위해 길이를 구하고 값을 구하는 식으로 진행

다음 소스코드를 활용하여 문제를 쉽게 해결할 수 있다.
해당 소스를 이용하면 바로 문제를 쉽게 해결할 수 있기에 문제의 의도를 파악하고, 소스코드를 이해하고 활용하는 것을 추천한다.

코드 입력( color scripter)


패스워드를 알아낸 후 아래의 그림처럼 차례대로 진행하면 해당 문제를 클리어 할 수 있다.
8~16




문제의 풀이 순서는 다음과 같이 정리할 수 있다.

1) Board에 하나의 게시글이 존재하고, 해당 게시글은 패스워드를 요구함
2) Blind SQL Injection을 통해 board의 패스워드를 알아냄
3) 알아낸 패스워드를 이용하여 게시글에 접근하면, 압축파일을 다운로드 받을 수 있음
4) 압축파일에는 암호가 걸려있고, 해당 패스워드는 admin 페이지에 존재함.
5) admin 페이지에서 패스워드를 요구함 
6) Blind SQL Injection을 통해 admin 페이지의 패스워드를 알아냄
7) 알아낸 패스워드를 이용하여 admin 페이지에 접근한 후 압축파일의 패스워드를 획득하고 압축파일을 해체함.
8) 압축파일에 존재하는 파일(.html)을 통해 webhacking.kr Auth 패스워드 및 플래그 획득하여 문제 클리어



